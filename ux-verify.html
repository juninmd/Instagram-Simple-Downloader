<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UX Verification</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        section { border: 1px solid #ccc; padding: 10px; margin: 10px 0; display: flex; align-items: center; }
        article { border: 1px solid #eee; padding: 10px; }
    </style>
</head>
<body>
    <h1>Instagram Simple Downloader UX Mock</h1>

    <article>
        <img src="https://via.placeholder.com/150" srcset="https://via.placeholder.com/150 1x" alt="Test Image">
        <section>
            <!-- Buttons will be prepended here -->
            <button>Like</button>
            <button>Comment</button>
        </section>
    </article>

    <script>
        // Mock Browser API
        window.browser = {
            runtime: {
                sendMessage: (msg) => {
                    console.log('Message sent:', msg);
                    return new Promise((resolve, reject) => {
                        setTimeout(() => {
                            if (msg.fail) reject(new Error('Mock Error'));
                            else resolve({ status: 'ok' });
                        }, 1000); // 1 second delay
                    });
                }
            }
        };

        // Mock window location for observer
        Object.defineProperty(window, 'location', {
            value: {
                href: 'https://www.instagram.com/',
                includes: (s) => 'https://www.instagram.com/'.includes(s)
            },
            writable: true
        });
    </script>

    <!-- Load app.js -->
    <script src="app.js"></script>
    <script>
        // Manually trigger searchFeed since observer might not fire on initial load or mutations happen too fast/slow
        setTimeout(() => {
             if (typeof searchFeed === 'function') {
                 searchFeed();
             } else {
                 console.log("searchFeed not found");
             }
        }, 500);
    </script>
</body>
</html>
